---
title: 'üîê Autentica√ß√£o da API'
description: 'Como se autenticar para utilizar a api'
---

---

### Etapa 1 ‚Äì Obtenha suas credenciais
Para iniciar a autentica√ß√£o, voc√™ precisa ter em m√£os dois pares de credenciais: um para o ambiente **sandbox** (teste) e outro para o ambiente de **produ√ß√£o**. Cada par cont√©m um `clientId` e um `clientSecret`, que s√£o fornecidos pela equipe da C√∫pula.
> **Importante:** mantenha essas credenciais em local seguro e nunca as compartilhe publicamente.

### Etapa 2 ‚Äì Solicite o token de acesso
Com as credenciais em m√£os, envie uma requisi√ß√£o HTTP POST para o endpoint de autentica√ß√£o correspondente ao ambiente desejado:
| Ambiente   | URL de Autentica√ß√£o                                     |
|------------|----------------------------------------------------------|
| Sandbox    | `https://checkout.sandbox.cupulahub.app/auth/v1/token` |
| Produ√ß√£o   | `https://checkout.cupulahub.app/auth/v1/token`     |
A requisi√ß√£o deve conter o seguinte corpo JSON:
```json
{
  "clientId": "SEU_CLIENT_ID",
  "clientSecret": "SEU_CLIENT_SECRET"
}
```
E incluir o header:
```http
Content-Type: application/json
```
#### Exemplo com cURL
```bash
curl -X POST https://checkout.sandbox.cupulahub.app/auth/v1/token \
  -H "Content-Type: application/json" \
  -d '{
    "clientId": "SEU_CLIENT_ID",
    "clientSecret": "SEU_CLIENT_SECRET"
  }'
```
---
### Etapa 3 ‚Äì Receba o token JWT
Se as credenciais forem v√°lidas, a API retornar√° uma resposta com o token de autentica√ß√£o no seguinte formato:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```
Esse token deve ser usado nas requisi√ß√µes futuras para acessar os servi√ßos da API da C√∫pula, sendo inclu√≠do no header como:
```http
Authorization: Bearer {token}
```
> **Dica:** Tokens possuem validade limitada. Armazene-o com seguran√ßa e renove quando necess√°rio.
---
### Poss√≠veis erros e como trat√°-los
| C√≥digo HTTP | Motivo                        | A√ß√£o sugerida                           |
|-------------|-------------------------------|------------------------------------------|
| 401         | Credenciais inv√°lidas         | Verifique o `clientId` e `clientSecret` |
| 400         | Corpo da requisi√ß√£o inv√°lido  | Verifique o formato do JSON enviado     |
| 500         | Erro interno                  | Tente novamente ou contate o suporte     |
---
### Renova√ß√£o do token
O token JWT possui validade definida no momento da gera√ß√£o. Para continuar utilizando a API ap√≥s expira√ß√£o, basta repetir o processo da **Etapa 2** com as mesmas credenciais para obter um novo token.
````